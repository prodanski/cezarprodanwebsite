<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post - Cezar Prodan</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Cezar Prodan - blogs</h1>
        <p class="tagline">Data Science, Mathematics</p>
        <nav>
            <a href="index.html">Home</a>
            <a href="cv.html">CV</a>
        </nav>
    </header>

    <main>
        <article id="blog-content">
            <!-- Blog content will be loaded dynamically -->
        </article>
    </main>

    <footer>
        <p>&copy; 2024 Your Name. All rights reserved.</p>
    </footer>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked-footnote/dist/index.umd.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    // Configure MathJax
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            processEscapes: true
        }
};
    };

    // Configure marked with footnote support
    marked.use(markedFootnote());
    marked.setOptions({
        breaks: true,
        gfm: true
    });

    // Get the blog post filename from URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const postFile = urlParams.get('post');
    
    if (postFile) {
        fetch(`posts/${postFile}`)
            .then(response => response.text())
            .then(markdown => {
                // Protect LaTeX from marked.js
                const latex = [];
                let protectedContent = markdown;
                
                // Extract and protect display math
                protectedContent = protectedContent.replace(/\$\$([\s\S]*?)\$\$/g, (match, math) => {
                    latex.push(match);
                    return `<!--LATEX-${latex.length - 1}-->`;
                });
                
                // Extract and protect inline math
                protectedContent = protectedContent.replace(/\$([^\$\n]+?)\$/g, (match, math) => {
                    latex.push(match);
                    return `<!--LATEX-${latex.length - 1}-->`;
                });
                
                // Render markdown
                let html = marked.parse(protectedContent);
                
                // Restore LaTeX
                latex.forEach((tex, i) => {
                    html = html.replace(`<!--LATEX-${i}-->`, tex);
                });
                
                document.getElementById('blog-content').innerHTML = html;
                
                // Tell MathJax to process the new content
                MathJax.typesetPromise();
            });
    }
</script>
</script>
</body>
</html>
